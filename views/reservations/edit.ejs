<% include ../partials/header %> 


<h1 class="title">Update reservation!</h1>
<hr>
<a href="/reservations/<%= reservation.reservationId %>" class="btn btn-dark" id="backButton">&lt&lt Back</a>

<div class="row">
    <form action="/reservations/<%= reservation.reservationId %>" method="POST" id="formUser">
        <div class="userData">
            <h3>Sign in to confirm:</h3>
            <div class="form-group">
                <input class="form-control" maxlength="15" autocomplete="off" required type="text" id="usernameRes" name="username" placeholder="username" value="<% if(typeof oldValues !== "undefined"){ %><%= oldValues.username %><% } %>">
                <input class="form-control" maxlength="15" autocomplete="off" required type="password" name="password" placeholder="password" value="<% if(typeof oldValues !== "undefined"){ %><%= oldValues.password %><% } %>">
            </div>
        </div>
        <hr>
        <div class="userData">
            <h3>Room:</h3>
            <div class="form-group"> 
                <% if(typeof oldValues !== "undefined" && typeof rooms !== "undefined"){ %><% selectedRoom = rooms.find(function(room){return room.roomId === oldValues.roomId;}).name;%><% } %>      
                <select multiple class="form-control" required name="roomId">
                    <% rooms.forEach(function(room){ %>
                        <option <% if(typeof selectedRoom !== "undefined" && selectedRoom === room.name){ %><%= "selected" %><% } %>><%= room.name %></option>
                    <% }); %>
                </select>
            </div>
        </div>
        <hr>
        <div class="userData">
            <h3>Topic:</h3>
            <div class="form-group">
                <input class="form-control" maxlength="20" autocomplete="off" required type="text" name="topic" placeholder="reservation's topic" value="<% if(typeof oldValues !== "undefined"){ %><%= oldValues.topic.topicName %><% } %>">
            </div>
        </div>
        <hr>
        <div class="userData">
            <h3>Start date:</h3>
            <div class="form-group">
                <input class="form-control" pattern="[1-9][0-9]{3}/(([0][1-9])|([1][0-2]))/[0-3][0-9] (([0-1][0-9])|([2][0-4])):[0-6][0-9]"autocomplete="off" id="datetimepickerStart" required type="text" name="start" value="<% if(typeof oldValues !== "undefined"){ %><%= oldValues.start.split("T").join(" ").split("+")[0].slice(0, -3).replace("-", "/").replace("-", "/"); %><% } %>">
            </div>
        </div>
        <hr>
        <div class="userData">
            <h3>End date:</h3>
            <div class="form-group">
                <input class="form-control" autocomplete="off" id="datetimepickerEnd" required type="text" name="end" value="<% if(typeof oldValues !== "undefined"){ %><%= oldValues.end.split("T").join(" ").split("+")[0].slice(0, -3).replace("-", "/").replace("-", "/"); %><% } %>">
            </div>
        </div>

        <div class="form-group formUserButtons">
            <button class="btn btn-lg btn-primary btn-block">
                Update reservation!
            </button>
            <input class="form-control" type="reset" id="reset">
        </div>
    </form>
</div>




<% include ../partials/footer %> 
